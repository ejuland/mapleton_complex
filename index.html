<!DOCTYPE html>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="./favicon.ico">
    <link rel="stylesheet" href="./style.css">
    <title>The Mapleton Complex</title>
</head>

<body>
    <main>
        <header class="content-section">
            <h1>The Mapleton Complex</h1>
            <sub>Save Your Friend &bull; Solve the Mystery &bull; Live to Tell the Story</sub>
            <a href="/play">Play the Game</a>
            <p class="scroll-prompt">scroll to learn more</p>
        </header>
        <section class="content-section section-1">
            <p class="story-text">
                It has been over two weeks since you have last seen him. Knowing him, he would have brought enough supplies to survive twice as long. This wasn’t the first time he disappeared off the radar for this long, but it has never felt this foreboding. The last
                time you heard from him, he said he was going back to the site. Why was he so obsessed with the place? In your opinion, it was nothing more than a remote pile of rubble which has served as a gathering spot for miscreants despite the warnings
                and trespassing signs.

            </p>
        </section>
        <section class="content-section section-2">
            <p class="story-text">
                He always insisted that there was more to it than that. “Consider the size!” he would interjet any time you tried to convince him of the place’s insignificance. Though you didn’t want to admit it, he had a fair point. According to local legend, the place
                had employed hundreds of workers in the late 40’s with the purpose of developing technology to support the war effort. However, less than a decade after its establishment, the facility was vacated and left desolate for years ever since.
                Every time you went with him, you couldn’t help but feel that the place was unusually small considering all of the rumors and lore surrounding it.
            </p>
        </section>
        <section class="content-section section-3">
            <p class="story-text">
                The facility was located north of the city deep within the forest. You would have easily missed the trail leading to the site if he hadn’t pointed it out to you. Off the side of one of the mountain's switch backs was a faded dirt trail just wide enough
                for a small truck to fit. The trail made a steep descent down the side of the mountain and ran alongside the river. After following the trail deeper into the forest, you would eventually begin to see the warning signs telling you to “turn
                back”, “trespassers will be prosecuted” and more messages with the likes of that. The messages however were never enforced. The government obviously had more important places to focus on.
            </p>
        </section>
        <section class="content-section section-4">
            <p class="story-text">
                When you got to the site itself, you couldn’t help but wonder how a large operation could have existed here. Undoubtedly there had been a government presence here. The most notable thing about the site was the disused rail tracks which ran around the
                perimeter. It was apparent that the place was used for some mining operations long ago. You could still see some of the neglected equipment rusting by the side of the mountain. Apart from that, there was limited evidence of the government's
                occupation. All that remained was a guard station, a toppled watch tower, and a few concrete walls on a foundation no larger than a small gas station. You had scoured the place on many occasions, but never found anything more significant
                than graffiti, some mouse droppings, and shattered glass. Despite all of this your friend still had a fondness of the place which bordered pure obsession.
            </p>
        </section>
        <section class="content-section section-5">
            <p class="story-text">
                “That’s why I'm here”, you think to yourself as you step out of your truck. As the cool dusk air brushes across your face, you can’t help but feel a little more relaxed. Under normal circumstances you would be tempted to stay the night just to enjoy the
                peaceful environment that the mountain provides. However, just as you predicted, you notice that your friend had parked in his usual spot. Relieved, you draw closer to his vehicle knowing that he usually sleeps in the back. When you arrive,
                you notice something peculiar. Instead of his normal sleeping gear, the bed of his truck is filled with rudimentary excavation equipment. As you scan the site you observe that many parts of the foundation have been broken into pieces.
                It is getting dark now, so you reach into the bed of his truck and grab gloves and a flashlight from the haphazard pile of tools lying in the back.
            </p>
        </section>
        <section class="content-section section-6">
            <p class="story-text">
                Night has fallen by the time you approach the site and you see a faint warm glow reflecting off one of the walls near the center of the facility. As you draw near the wall, you can clearly make out a man-sized hole which appears to be the source of the
                soft glow. Your attention is caught by a long rope anchored to the wall which descends into the hole. As you look down you are surprised to find that the hole goes down far deeper than you expected. It could easily be a thirty-foot descent
                to the bottom of the palace. You try yelling down into the pit, but you get no response. Praying you don’t find your friend in a mangled heap at the bottom, you don your gloves, inspect the anchor, tug on the rope a few times for good
                measure, and proceed to repel down into the pit.
            </p>
        </section>
        <section class="content-section section-7">
            <p>

                As you reach the bottom, you are confused to find that the light source was not your friend. In fact, the only trace of him was the rope that he left behind. The light source came from what appeared to be an old freight elevator. As you debate whether
                to investigate further you are startled by the sound of the rope hitting the ground with a heavy thud behind you. You infer that the anchor had come undone. You take a moment to compose yourself and then decide to investigate the elevator
                further. You reason that your friend couldn’t be too far ahead of you. You step through the open doors and find a brass panel to your right with two vertically-aligned buttons. Wishing that your friend is on a higher floor, you attempt
                to press the top button to no avail. After many futile attempts, you feel a gowing weight in your stomach as you realize that your only hope of finding your friend and getting back up is by going down. You take a deep breath and reach
                for the bottom button…
            </p>
        </section>
        <section class="content-section article-end">
            <a href="/play" class="play-now">Play Now</a>
            <a href="" class="how-to-play">How to Play</a>
            <a href="" class="about-us">About Us</a>
        </section>

    </main>
    <script>
        const sections = 7;
        for (let i = 1; i <= sections; i++) {
            document.querySelector(".section-" + i).classList.remove("section-" + i);
        }
        const gallery = [
            "https://images.unsplash.com/photo-1542448953-d8d53cb64ab9?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1170&q=80",
            "https://images.unsplash.com/photo-1546527868-ccb7ee7dfa6a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
            "https://images.unsplash.com/photo-1519681393784-d120267933ba?ixid=MnwxMjA3fDB8MHxzZWFyY2h8Nnx8bW91bnRhaW58ZW58MHx8MHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
            "https://images.unsplash.com/photo-1542397284385-6010376c5337?ixid=MnwxMjA3fDB8MHxzZWFyY2h8NXx8Ym9hdHxlbnwwfHwwfHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
            "https://images.unsplash.com/photo-1484154218962-a197022b5858?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTR8fGhvdXNlfGVufDB8fDB8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
            "https://images.unsplash.com/photo-1453614512568-c4024d13c247?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8Y29mZmVlJTIwc2hvcHxlbnwwfHwwfHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
            "https://images.unsplash.com/photo-1501785888041-af3ef285b470?ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8bGFrZXxlbnwwfHwwfHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
        ];
        // Reference: http://www.html5rocks.com/en/tutorials/speed/animations/

        let lastKnownScrollPosition = 0;
        let ticking = false;
        let lastTilePos = 0;

        function doSomething(scrollPos) {
            // Do something with the scroll position
            let tilePosition = (Math.floor(((scrollPos + (window.innerHeight / 2)) / window.innerHeight)));
            if (tilePosition !== lastTilePos && tilePosition <= sections) {
                document.getElementsByTagName("html")[0].classList.remove("section-" + (lastTilePos));
                document.getElementsByTagName("html")[0].classList.add("section-" + tilePosition)
                console.log(tilePosition);
            }
            lastTilePos = tilePosition;

        }

        document.getElementsByTagName("main")[0].addEventListener('scroll', function(e) {
            lastKnownScrollPosition = document.getElementsByTagName("main")[0].scrollTop;

            if (!ticking) {
                window.requestAnimationFrame(function() {
                    doSomething(lastKnownScrollPosition);
                    ticking = false;
                });

                ticking = true;
            }
        });
    </script>
</body>

</html>